<ion-header mode="md" class="reader-header">
  <ion-toolbar>

    <ion-buttons slot="start">
      <ion-button (click)="botonAtras()" color="primary">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>

    <div class="book-selector-capsule" align="center">
      <ion-button fill="clear" class="capsule-btn book-btn">
        {{librot}}
      </ion-button>
      <span class="divider">|</span>
      <ion-button fill="clear" class="capsule-btn chapter-btn">
        {{capitulo}}
      </ion-button>
    </div>

    <ion-buttons slot="end" class="reading-controls">
      <ion-button (click)="disminuirSize()" class="font-control small">
        <span class="text-icon">A</span>
      </ion-button>
      <ion-button (click)="aumentarSize()" class="font-control large">
        <span class="text-icon">A</span>
      </ion-button>
      <ion-button (click)="changeDark()">
        <ion-icon name="{{estadoDark}}" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>

  </ion-toolbar>
</ion-header>

<ion-content class="reader-content">

  <!-- Sticky Footer Menu -->
  <div class="sticky-footer" [class.valid]="isMenuOpen">
    <div class="menu-content ion-padding">

      <div class="action-row">
        <div class="action-item" (click)="marcarVersiculo()">
          <div class="icon-circle"><ion-icon name="bookmark"></ion-icon></div>
          <ion-label>Marcar</ion-label>
        </div>
        <div class="action-item" (click)="crearNota()">
          <div class="icon-circle"><ion-icon name="document-text"></ion-icon></div>
          <ion-label>Nota</ion-label>
        </div>
        <div class="action-item" (click)="copiarVersiculo()">
          <div class="icon-circle"><ion-icon name="copy"></ion-icon></div>
          <ion-label>Copiar</ion-label>
        </div>
        <div class="action-item" (click)="compartirVersiculo()">
          <div class="icon-circle"><ion-icon name="share-social"></ion-icon></div>
          <ion-label>Compartir</ion-label>
        </div>
      </div>

      <div class="color-row">
        <div *ngFor="let color of ['#FFF9C4', '#DCEDC8', '#B3E5FC', '#F8BBD0', '#E1BEE7']" class="color-dot"
          [style.background-color]="color" [class.selected]="selectedColor === color" (click)="seleccionarColor(color)">
          <ion-icon name="checkmark" *ngIf="selectedColor === color"></ion-icon>
        </div>
      </div>
    </div>
  </div>

  <div class="main-reading-container">

    <!-- Days Carousel (Specific to LeerPlan) -->
    <div *ngIf="detalleDia && detalleDia.length > 0" class="days-carousel-wrapper animate-fade-in">
      <ion-segment scrollable mode="md" [value]="contParteDia">
        <ion-segment-button *ngFor="let dia of detalleDia; let i = index" [value]="i" (click)="clickDias(dia, i)">
          <ion-label>
            {{dia.libroNombre}} {{dia.capitulo}}<span *ngIf="dia.versiculo">:{{dia.versiculo}}</span>
          </ion-label>
        </ion-segment-button>
      </ion-segment>
    </div>

    <div class="text-container animate-fade-in">
      <app-bible-viewer [content]="textoJsonFinal" [fontSize]="fontSize" [notes]="notas" [highlights]="highlightsMap"
        [idPrefix]="'lp'"
        (verseClick)="seleccionarVersiculo($event.texto, $event.idLibro, $event.capitulo, $event.versiculo)"
        (noteClick)="verNota($event.capitulo, $event.versiculo)"
        (citationClick)="citaAlert($event.cita, $event.ibroCita, $event.capituloCita, $event.versiculoCitaInicial)">
      </app-bible-viewer>

      <div class="text-footer">
        <img src="assets/icon/icon-small.png" class="footer-logo">
        <span>Sion: Leche y Miel</span>
      </div>
    </div>

  </div>

  <!-- Navigation FABs -->
  <ng-container>
    <ion-fab vertical="bottom" horizontal="start" slot="fixed" [class.raise-fabs]="isMenuOpen">
      <ion-fab-button (click)="previousboton()" class="nav-fab glass">
        <ion-icon name="chevron-back"></ion-icon>
      </ion-fab-button>
    </ion-fab>

    <ion-fab *ngIf="botonPlay" vertical="bottom" horizontal="center" slot="fixed" [class.raise-fabs]="isMenuOpen">
      <ion-fab-button (click)="playAudio()" class="play-fab gold">
        <ion-icon [name]="playPausa"></ion-icon>
      </ion-fab-button>
    </ion-fab>

    <ion-fab vertical="bottom" horizontal="end" slot="fixed" [class.raise-fabs]="isMenuOpen">
      <ion-fab-button (click)="nextboton()" class="nav-fab glass">
        <ion-icon name="chevron-forward"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </ng-container>

</ion-content>