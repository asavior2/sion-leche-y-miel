<ion-header mode="md">
  <!-- Allow everything but only from the same origin and foo.com -->
  <ion-toolbar align="center">
    <ion-buttons size="small" slot="start" class="ion-no-padding">
      <ion-back-button size="small" defaultHref="/" (click)="botonAtras()"></ion-back-button>
    </ion-buttons>

    <ion-button clear small class="ion-no-padding" size="small" fill="clear" color="dark">
      <FONT face="Segoe UI" [style.font-size.px]=this.fontSize-3>
        {{librot}}
      </FONT>
    </ion-button>
    <ion-button color="dark" clear small fill="clear">
      <FONT face="Segoe UI" [style.font-size.px]=this.fontSize-3>
        {{capitulo}}
      </FONT>
    </ion-button>
    <ion-button color="dark" clear small fill="clear" (click)="aumentarSize()" size="small" class="ion-no-padding">
      <FONT face="Segoe UI" [style.font-size.px]=this.fontSize-3>
        A+
      </FONT>
    </ion-button>
    <ion-button color="dark" clear small fill="clear" (click)="disminuirSize()" size="small">
      <FONT face="Segoe UI" [style.font-size.px]=this.fontSize-8>
        a-
      </FONT>
    </ion-button>
    <ion-button color="dark" clear fill="clear" (click)="changeDark()" size="small">
      <ion-icon name="{{estadoDark}}"></ion-icon>
    </ion-button>

  </ion-toolbar>
</ion-header>

<ion-content>

  <!-- Selection Menu (Bottom Sheet) -->
  <!-- Selection Menu (Bottom Sheet) -->
  <div class="sticky-footer" [class.valid]="isMenuOpen">
    <div class="menu-content ion-padding">
      <!-- Row 1: Action Icons with Labels -->
      <div class="action-row" style="display: flex; justify-content: space-around; margin-bottom: 20px;">
        <div class="action-item" (click)="marcarVersiculo()">
          <ion-button fill="clear">
            <ion-icon name="bookmark" slot="icon-only" size="large"></ion-icon>
          </ion-button>
          <ion-label style="font-size: 10px; display: block; text-align: center;">Marcar</ion-label>
        </div>

        <div class="action-item" (click)="crearNota()">
          <ion-button fill="clear">
            <ion-icon name="document-text" slot="icon-only" size="large"></ion-icon>
          </ion-button>
          <ion-label style="font-size: 10px; display: block; text-align: center;">Nota</ion-label>
        </div>

        <div class="action-item" (click)="copiarVersiculo()">
          <ion-button fill="clear">
            <ion-icon name="copy" slot="icon-only" size="large"></ion-icon>
          </ion-button>
          <ion-label style="font-size: 10px; display: block; text-align: center;">Copiar</ion-label>
        </div>

        <div class="action-item" (click)="compartirVersiculo()">
          <ion-button fill="clear">
            <ion-icon name="share-social" slot="icon-only" size="large"></ion-icon>
          </ion-button>
          <ion-label style="font-size: 10px; display: block; text-align: center;">Compartir</ion-label>
        </div>
      </div>

      <!-- Row 2: Color Palette (Minimalist) -->
      <div class="color-row" style="display: flex; justify-content: center; gap: 15px;">
        <div *ngFor="let color of ['#FFF9C4', '#DCEDC8', '#B3E5FC', '#F8BBD0', '#E1BEE7']" class="color-dot"
          [style.background-color]="color" [class.selected]="selectedColor === color" (click)="seleccionarColor(color)">
        </div>
      </div>
    </div>
  </div>

  <ion-grid>
    <ion-row>
      <ion-col size-md="2" size-lg="3">
      </ion-col>
      <ion-col size-xs="12" size-md="8" size-lg="6">

        <!-- Restored Days Carousel -->
        <div *ngIf="detalleDia && detalleDia.length > 0" class="ion-padding-bottom">
          <ion-segment scrollable mode="md" [value]="contParteDia">
            <ion-segment-button *ngFor="let dia of detalleDia; let i = index" [value]="i" (click)="clickDias(dia, i)">
              <ion-label>
                {{dia.libroNombre}} {{dia.capitulo}}<span *ngIf="dia.versiculo">:{{dia.versiculo}}</span>
              </ion-label>
            </ion-segment-button>
          </ion-segment>
        </div>

        <app-bible-viewer [content]="textoJsonFinal" [fontSize]="fontSize" [notes]="notas" [highlights]="highlightsMap"
          [idPrefix]="'lp'"
          (verseClick)="seleccionarVersiculo($event.texto, $event.idLibro, $event.capitulo, $event.versiculo)"
          (noteClick)="verNota($event.capitulo, $event.versiculo)"
          (citationClick)="citaAlert($event.cita, $event.ibroCita, $event.capituloCita, $event.versiculoCitaInicial)">
        </app-bible-viewer>

        <div align="center">
          <FONT face="Segoe UI" size="3"><strong>*(SLM) Sion: Leche y Miel</strong></FONT>
          <br><br>
        </div>


      </ion-col>
      <ion-col size-md="2" size-lg="3">
      </ion-col>

    </ion-row>
  </ion-grid>

  <!--Botones flotantes para la version de escritorio middle y middle right-->
  <ion-fab vertical="bottom" horizontal="start" slot="fixed" [class.raise-fabs]="isMenuOpen">
    <ion-fab-button (click)="previousboton()" size="small">
      <ion-icon name="chevron-back-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <ion-fab *ngIf="botonPlay" vertical="bottom" horizontal="center" slot="fixed" [class.raise-fabs]="isMenuOpen">
    <ion-fab-button (click)="playAudio()" size="small" color="light">
      <ion-icon name="{{playPausa}}" color="primary"></ion-icon>
    </ion-fab-button>
  </ion-fab>


  <ion-fab vertical="bottom" horizontal="end" slot="fixed" size="small" [class.raise-fabs]="isMenuOpen">
    <ion-fab-button (click)="nextboton()" size="small">
      <ion-icon name="chevron-forward-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>


  <br>
</ion-content>