/* --- CONFIGURACIÓN TIPOGRÁFICA --- */
.bible-viewer-container {
    font-family: 'Merriweather', 'Georgia', serif;
    /* Fuente Serif para lectura seria */
    line-height: 1.6;
    /* Altura de línea cómoda */
    color: #2C2C2C;
    /* Gris Carbón en lugar de negro puro */
    text-align: justify;
    /* Justificado como pides */
    hyphens: auto;
    /* Evita espacios grandes en justificado */
    padding-bottom: 20px;
}

/* --- TÍTULOS DE PERÍCOPAS --- */
.title-wrapper {
    margin-top: 25px;
    margin-bottom: 15px;
    text-align: center;

    h3 {
        font-family: 'Merriweather', serif;
        /* O una Sans-Serif elegante si prefieres contraste */
        color: #9E7F2A;
        /* Dorado Sion */
        margin: 0;
        font-weight: 700;
        font-size: 1.1em;
        /* Relativo al tamaño base */
        line-height: 1.3;
    }
}

/* --- BLOQUE DE VERSÍCULO --- */
.verse-line {
    margin-bottom: 0px;
    /* Párrafo continuo estilo Biblia */
    /* Si prefieres versículos separados, pon margin-bottom: 8px */
}

.verse-content {
    display: inline;
    /* Hace que el texto fluya como un libro continuo */
    position: relative;
}

/* --- NÚMERO DE VERSÍCULO --- */
.verse-num {
    font-family: 'Inter', sans-serif;
    /* Sans-serif para números */
    font-size: 0.65em;
    /* Pequeño */
    font-weight: 700;
    color: #9E7F2A;
    /* Dorado */
    vertical-align: top;
    margin-right: 4px;
    user-select: none;
    /* Evita que se seleccione al copiar */
    opacity: 0.8;
    position: relative;
    top: 2px;
}

/* --- TEXTO DEL VERSÍCULO (FRAGMENTOS) --- */
.text-fragment {
    /* La selección (background-color) se aplica inline desde Angular */
    /* Añadimos padding pequeño para que el resaltado no se vea pegado */
    padding: 1px 0;
    border-radius: 2px;
    box-decoration-break: clone;
    /* Importante para que el resaltado funcione en saltos de línea */
    -webkit-box-decoration-break: clone;
}

/* --- ICONO DE CITA --- */
.citation-trigger {
    display: inline-block;
    vertical-align: super;
    cursor: pointer;
    margin: 0 1px;

    ion-icon {
        font-size: 0.7em;
        /* Muy sutil */
        color: #C2A153;
        /* Ocre */
        transition: transform 0.2s;
    }

    &:active ion-icon {
        transform: scale(1.2);
        color: #9E7F2A;
    }
}

/* --- ICONO DE NOTA --- */
.note-indicator {
    display: inline-block;
    margin-left: 4px;
    cursor: pointer;
    vertical-align: middle;

    ion-icon {
        color: #D98D2F;
        /* Ámbar/Naranja */
        font-size: 0.85em;
    }
}

/* --- MODO OSCURO --- */
:host-context(body.dark) {
    .bible-viewer-container {
        color: #E0E0E0;
        /* Blanco hueso */
    }

    .title-wrapper h3 {
        color: #C2A153;
        /* Dorado más claro para contraste oscuro */
    }

    .verse-num {
        color: #888;
        /* Números más apagados en modo noche */
    }

    .citation-trigger ion-icon {
        color: #A68B45;
    }

    /* Ajuste para resaltados en modo oscuro */
    /* Esto asegura que el texto negro del resaltado se lea si el fondo es claro */
    /* O puedes usar mix-blend-mode si el navegador lo soporta */
}



.bible-reading-flow {
    font-family: 'Merriweather', serif;
    /* Fuente de lectura */
    line-height: 1.7;
    /* Un poco más alto para facilitar la lectura fluida */
    text-align: justify;
    /* Clásico en libros */
    color: #2C2C2C;
    padding: 0 5px;

    /* IMPORTANTE: Esto asegura que el texto fluya */
    display: block;
}

/* --- TÍTULOS (Rompen el flujo) --- */
.pericopa-block {
    display: block;
    /* Fuerza salto de línea */
    margin-top: 30px;
    margin-bottom: 15px;
    text-align: center;
    width: 100%;
    /* Ocupa todo el ancho */

    h3 {
        font-family: 'Merriweather', serif;
        font-weight: 700;
        color: #9E7F2A;
        font-size: 1.2em;
        margin: 0;
    }
}

/* --- VERSÍCULO INDIVIDUAL (Fluye) --- */
.verse-span {
    display: inline;
    /* EL SECRETO: Hace que se pegue al anterior */
    box-decoration-break: clone;
    -webkit-box-decoration-break: clone;
    padding: 2px 0;
    /* Add vertical breathing room for highlight */
}

/* --- NÚMERO DE VERSÍCULO --- */
.verse-number {
    font-family: 'Inter', sans-serif;
    font-weight: bold;
    font-size: 0.65em;
    /* Pequeño */
    color: #9E7F2A;
    /* Dorado */
    vertical-align: super;
    /* Elevado */
    margin-right: 2px;
    user-select: none;
    /* No se selecciona al copiar */
}

/* --- TEXTO DEL VERSÍCULO --- */
.text-content {
    /* Removed box-decoration-break from here since wrapper handles it */
    border-radius: 2px;
}

/* --- ICONOS (Cita y Nota) --- */
.citation-icon,
.note-icon {
    display: inline-block;
    vertical-align: middle;
    cursor: pointer;
    margin: 0 1px;

    ion-icon {
        font-size: 0.8em;
        margin-bottom: 2px;
    }
}

.citation-icon ion-icon {
    color: #C2A153;
}

.note-icon ion-icon {
    color: #D98D2F;
}

/* Ajuste Dark Mode */
:host-context(body.dark) {
    .bible-reading-flow {
        color: #E0E0E0;
    }

    .pericopa-block h3 {
        color: #C2A153;
    }

    .verse-number {
        color: #888;
    }

    /* Highlight Support for Dark Mode */
    /* Ensure highlights are readable */
    .verse-span[style*="background-color"] {
        /* Dim the highlight background without changing the color value */
        /* This overlays a semi-transparent black layer, making bright colors darker */
        box-shadow: inset 0 0 0 1000px rgba(0, 0, 0, 0.5);

        /* Ensure text remains standard light color for dark mode */
        color: inherit;

        /* Optional: slight text shadow for extra legibility */
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);

        display: inline;
        box-decoration-break: clone;
        -webkit-box-decoration-break: clone;
        padding: 2px 0;
        border-radius: 3px;
    }
}

/* --- RESALTADO ACTIVO (Añadido para asegurar alcance) --- */
.versiculo-highlight {
    background-color: rgba(218, 165, 32, 0.086) !important;
    /* Dorado Premium */
    box-decoration-break: clone;
    -webkit-box-decoration-break: clone;
    border-radius: 4px;
}